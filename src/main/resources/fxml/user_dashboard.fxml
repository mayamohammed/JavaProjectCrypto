<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>

<StackPane fx:id="mainContainer" prefHeight="720.0" prefWidth="1280.0" stylesheets="@style.css"
           xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="cryptographie.maya.controller.UserDashboardController">

    <ImageView fitHeight="720.0" fitWidth="1280.0" preserveRatio="false">
        <Image url="@../img/bg_cyber1.png" />
    </ImageView>
    <Region style="-fx-background-color: rgba(2, 6, 23, 0.75);" />

    <BorderPane prefHeight="720.0" prefWidth="1280.0">
        <top>
            <HBox alignment="CENTER_LEFT" spacing="20" styleClass="nav-bar">
                <padding><Insets bottom="15" left="30" right="30" top="15" /></padding>
                <children>
                    <ImageView fitHeight="30" preserveRatio="true">
                        <Image url="@../img/register.png" />
                    </ImageView>
                    <Label fx:id="usernameLabel" text="SECURE_SESSION: ACTIVE" styleClass="label-username" />
                    <Region HBox.hgrow="ALWAYS" />
                    <Button fx:id="logoutButton" text="DECONNEXION" styleClass="btn-register-outline" onAction="#handleLogout"/>
                </children>
            </HBox>
        </top>

        <center>
            <VBox spacing="15" styleClass="glass-card">
                <BorderPane.margin><Insets bottom="20" left="30" right="30" top="10" /></BorderPane.margin>
                <padding><Insets bottom="20" left="20" right="20" top="20" /></padding>
                <children>
                    <Label text="VOS DONNÉES CHIFFRÉES (AES-256)" styleClass="sub-title" />
                    <TableView fx:id="itemsTable" VBox.vgrow="ALWAYS" styleClass="cyber-table">
                        <columns>
                            <TableColumn fx:id="colId" prefWidth="60" text="ID" />
                            <TableColumn fx:id="colTitle" prefWidth="350" text="NOM DU FICHIER" />
                            <TableColumn fx:id="colType" prefWidth="150" text="FORMAT" />
                            <TableColumn fx:id="colCreatedAt" prefWidth="180" text="DATE DE SÉCURISATION" />
                        </columns>
                        <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
                    </TableView>
                </children>
            </VBox>
        </center>

        <bottom>
            <HBox alignment="CENTER_RIGHT" spacing="15">
                <padding><Insets bottom="30" left="30" right="30" top="10" /></padding>
                <children>
                    <Button fx:id="addItemButton" text="+ AJOUTER" styleClass="btn-action" onAction="#handleAddItem"/>
                    <Region HBox.hgrow="ALWAYS" />
                    <Button fx:id="deleteItemButton" text="SUPPRIMER" styleClass="btn-danger" onAction="#handleDeleteItem"/>
                    <Button fx:id="downloadButton" text="DÉCHIFFRER &amp; TÉLÉCHARGER" styleClass="btn-login" onAction="#handleDownloadSelected" />
                </children>
            </HBox>
        </bottom>
    </BorderPane>
</StackPane>